<ul>
    <li ng-repeat="post in posts track by post.id" ng-class="{ last: $last }">
        <div ng-switch="post.viewFull">

            <!--collapsed reply-->
            <div ng-switch-default scroll-item>
                <span class="oneline" ng-class="[post.lineClass || 'oneline9', post.tagClass]" ng-click="expandReply(post)" ng-bind-html="::post.oneline | trusted"></span>

                <span class="onelineSeparator">&nbsp;:&nbsp;</span>
                <span ng-class="::post.userClass || 'user'">{{::post.author}}</span>
                <!--<span ng-repeat="tag in ::post.lols" class="tag" ng-class="::['tag_' + tag.tag]" title="{{tag.tag}}" lolcount="{{tag.count}}"></span>-->
            </div>

            <!--expanded reply-->
            <div ng-switch-when="true">
                <div class="replyPost" ng-class="post.tagClass" scroll-into-view>
                    <post></post>
                    <div class="postBody postBodyText" ng-bind-html="::post.body | trusted"></div>
                </div>

                <replybox class="replybox-comment" post="post" ng-if="post.replying"></replybox>
            </div>

        </div>

        <!-- replies to this post -->
        <comments posts="post.posts" flat="false" ng-if="::!flat" scroll-item></comments>
    </li>
</ul>