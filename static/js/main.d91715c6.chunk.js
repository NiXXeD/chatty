(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,n){e.exports=n(403)},390:function(e,t,n){},391:function(e,t,n){},392:function(e,t,n){},403:function(e,t,n){"use strict";n.r(t);var a=n(11);Object(a.b)();var r=n(0),o=n.n(r),c=n(25),l=n.n(c),s=n(54),i=n.n(s)()({palette:{type:"dark",primary:{light:"#6fbf73",main:"#357a38",dark:"#357a38"},secondary:{light:"#33eaff",main:"#00e5ff",dark:"#00a0b2"}},typography:{useNextVariants:!0}}),u=n(405),d=n(8),p=n(107),m=n.n(p),f=n(108),b=n.n(f),h=n(22),g=n.n(h),v=n(161),E=n.n(v),x=n(34),O=n.n(x),w=n(28),y=n.n(w),j=n(73),k=n.n(j),C=n(27),S=n.n(C),T=n(7),I=n.n(T),N=n(17),F=n(48),R=n.n(F),B=n(69),L=n.n(B),P=n(70),D=n.n(P),M=n(71),U=n.n(M),z=n(57),_=n.n(z),J=o.a.createContext({}),V=o.a.createContext({});var W=function(e){var t=e.open,n=e.onClose,a=Object(r.useState)(""),c=Object(d.a)(a,2),l=c[0],s=c[1],i=Object(r.useState)(""),u=Object(d.a)(i,2),p=u[0],m=u[1],f=Object(r.useContext)(J).login,b=Object(r.useContext)(V).setLoading,h=function(){var e=Object(N.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,b("sync"),e.next=5,f(l,p);case 5:n();case 6:return e.prev=6,b(!1),e.finish(6);case 9:case"end":return e.stop()}},e,null,[[1,,6,9]])}));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(R.a,{open:t,onClose:n},o.a.createElement("form",{onSubmit:h},o.a.createElement(L.a,null,"Log in"),o.a.createElement(D.a,null,o.a.createElement(_.a,{autoFocus:!0,margin:"dense",label:"Username",type:"text",fullWidth:!0,onChange:function(e){return s(e.target.value)}}),o.a.createElement(_.a,{margin:"dense",label:"Password",type:"password",fullWidth:!0,onChange:function(e){return m(e.target.value)}})),o.a.createElement(U.a,null,o.a.createElement(S.a,{onClick:n},"Cancel"),o.a.createElement(S.a,{type:"submit"},"Log in"))))};var H=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(S.a,{onClick:function(){return a(!0)}},"Log in"),o.a.createElement(W,{open:n,onClose:function(){return a(!1)}}))};var A=function(e){var t=e.onClick,n=Object(r.useContext)(J).logout;return o.a.createElement(O.a,{onClick:function(){t&&t(),n()}},"Logout")},Y=n(153),q=n.n(Y),K=n(152),G=n.n(K);var Q=function(){var e=Object(r.useContext)(J),t=e.isLoggedIn,n=e.username,a=Object(r.useState)(null),c=Object(d.a)(a,2),l=c[0],s=c[1];return t?o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{onClick:function(e){return s(e.target)}},o.a.createElement(G.a,null)),l&&o.a.createElement(k.a,{keepMounted:!0,open:!!l,anchorEl:l,onClose:function(){return s(null)}},o.a.createElement(O.a,{disabled:!0},n),o.a.createElement(q.a,null),o.a.createElement(A,{onClick:function(){return s(null)}}))):o.a.createElement(H,null)},X=n(23),Z=n.n(X),$=n(104),ee=n.n($),te=n(74),ne=n.n(te),ae=o.a.createContext({});var re=Object(a.c)({badge:{top:12}}),oe=function(){var e=re(),t=Object(r.useContext)(ae),n=t.newThreads,a=t.refreshChatty,c=n&&n.length>0,l=c?"Refresh Thread Order (".concat(n.length," new threads)"):"Refresh Thread Order";return o.a.createElement(Z.a,{disableFocusListener:!0,title:l,enterDelay:350},o.a.createElement(g.a,{onClick:a},c?o.a.createElement(ne.a,{badgeContent:n.length,color:"secondary",classes:{badge:e.badge}},o.a.createElement(ee.a,null)):o.a.createElement(ee.a,null)))},ce=n(78),le=n.n(ce),se=n(75),ie=n.n(se),ue=n(154),de=n.n(ue),pe=n(77),me=n.n(pe),fe=n(76),be=n.n(fe),he=n(56),ge=n.n(he),ve=n(20),Ee=n(49),xe=n.n(Ee),Oe=function(){var e=Object(N.a)(I.a.mark(function e(t){var n,a,r,o,c,l,s=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=s.length>1&&void 0!==s[1]?s[1]:{}).body&&(n=Object(ve.a)({},n,{headers:Object(ve.a)({"Content-Type":"application/x-www-form-urlencoded"},n.headers),body:xe.a.stringify(n.body)})),e.next=4,fetch("".concat("https://winchatty.com/v2","/").concat(t),n);case 4:if(!(a=e.sent).ok){e.next=11;break}return e.next=8,we(a);case 8:return e.abrupt("return",e.sent);case 11:return e.next=13,we(a);case 13:return r=e.sent,o=a.status,c=a.statusText,l={status:o,statusText:c,body:r},console.error("Http Error:",l),e.abrupt("return",Promise.reject(l));case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(N.a)(I.a.mark(function e(t){var n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return n=e.sent,e.prev=3,e.abrupt("return",JSON.parse(n));case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,null,[[3,7]])}));return function(t){return e.apply(this,arguments)}}(),ye=n(5),je=n.n(ye);var ke=Object(a.c)({card:{backgroundColor:"#202224",borderRadius:0,border:"1px solid #656565"},actions:{margin:"-8px 0 8px 8px"},flexRow:{display:"flex",flexDirection:"row"},textarea:{flex:1,backgroundColor:"#000",padding:4}}),Ce=function(e){var t=e.onCloseReplyBox,n=e.parentId,a=e.className,c=ke(),l=Object(r.useContext)(J),s=l.username,i=l.password,u=Object(r.useContext)(V),p=u.setLoading,m=u.showSnackbar,f=Object(r.useState)(""),b=Object(d.a)(f,2),h=b[0],g=b[1],v=Object(r.useState)(!1),E=Object(d.a)(v,2),x=E[0],O=E[1],w=function(){var e=Object(N.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p("async"),O(!0),e.next=5,Oe("postComment",{method:"POST",body:{username:s,password:i,parentId:n,text:h}});case 5:"success"===e.sent.result&&t(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error while posting comment",e.t0),m("Error while posting. Please try again later."),O(!1);case 14:return e.prev=14,p(!1),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[0,9,14,17]])}));return function(){return e.apply(this,arguments)}}();return o.a.createElement(ie.a,{className:je()(a,c.card)},0===n&&o.a.createElement(de.a,{title:"New Thread"}),o.a.createElement(be.a,null,o.a.createElement("div",{className:c.flexRow},o.a.createElement(ge.a,{multiline:!0,autoFocus:!0,disableUnderline:!0,rows:5,fullWidth:!0,className:c.textarea,placeholder:"Type something interesting...",name:"replyBody",required:!0,disabled:x,onChange:function(e){return g(e.target.value)}}))),o.a.createElement(me.a,{className:c.actions},o.a.createElement(S.a,{color:"primary",variant:"outlined",disabled:x||!h.length,onClick:w},"Post"),o.a.createElement(S.a,{variant:"outlined",disabled:x,onClick:t},"Cancel")))};var Se=Object(a.c)({dialogPaper:{width:"85vw"}}),Te=function(){var e=Se(),t=Object(r.useContext)(J).isLoggedIn,n=Object(r.useState)(!1),a=Object(d.a)(n,2),c=a[0],l=a[1];return t?o.a.createElement(o.a.Fragment,null,o.a.createElement(Z.a,{disableFocusListener:!0,title:"New Thread",enterDelay:350},o.a.createElement(g.a,{onClick:function(){return l(!0)}},o.a.createElement(le.a,null))),o.a.createElement(R.a,{open:c,onClose:function(){return l(!1)},classes:{paper:e.dialogPaper}},o.a.createElement(Ce,{parentId:0,onCloseReplyBox:function(){return l(!1)}}))):null},Ie=n(105),Ne=n.n(Ie);var Fe=Object(a.c)({badge:{top:12}}),Re=function(){var e=Fe(),t=Object(r.useContext)(J),n=t.isLoggedIn,a=t.username,c=t.password,l=Object(r.useState)(0),s=Object(d.a)(l,2),i=s[0],u=s[1],p=Object(r.useState)(0),m=Object(d.a)(p,2),f=m[0],b=m[1],h=f>0,v="( ".concat(f," / ").concat(i," ) unread messages");return Object(r.useEffect)(function(){var e=function(){var e=Object(N.a)(I.a.mark(function e(){var t,r,o,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=9;break}return t={method:"POST",body:{username:a,password:c}},e.next=4,Oe("getMessageCount",t);case 4:r=e.sent,o=r.total,l=r.unread,u(o),b(l);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();e();var t=setInterval(function(){return e()},9e5);return function(){return clearInterval(t)}},[n,c,a]),n?o.a.createElement(Z.a,{disableFocusListener:!0,title:v,enterDelay:350},o.a.createElement(g.a,{href:"https://www.shacknews.com/messages",target:"_blank"},h?o.a.createElement(ne.a,{badgeContent:f,color:"secondary",classes:{badge:e.badge}},o.a.createElement(Ne.a,null)):o.a.createElement(Ne.a,null))):null},Be=n(99),Le=n.n(Be),Pe=n(160),De=n.n(Pe),Me=n(100),Ue=n.n(Me),ze=o.a.createContext({}),_e=n(98),Je=n.n(_e),Ve=n(72),We=n.n(Ve),He=n(156),Ae=n.n(He),Ye=n(106),qe=n.n(Ye),Ke=n(157),Ge=n.n(Ke),Qe=n(155),Xe=n.n(Qe),Ze=n(79),$e=n.n(Ze);var et=Object(a.c)({row:{display:"flex",flexDirection:"row"},fill:{display:"flex",flex:1},container:{marginTop:12},title:{marginTop:6}}),tt=function(e){var t=e.title,n=e.value,a=e.onChange,c=et(),l=Object(r.useState)(!1),s=Object(d.a)(l,2),i=s[0],u=s[1],p=Object(r.useState)(""),m=Object(d.a)(p,2),f=m[0],b=m[1],h=Object(r.useContext)(V).showSnackbar,v=function(){try{if(f.length){var e=new RegExp(f,"gmi"),t={text:f,regex:e};a&&a(n.concat([t])),u(!1),b("")}}catch(r){h("Invalid filter term."),console.error("Error processing new filter value",f,r)}};return o.a.createElement("div",{className:c.container},o.a.createElement("div",{className:c.row},i?o.a.createElement(o.a.Fragment,null,o.a.createElement(_.a,{placeholder:"Add new ".concat(t.toLowerCase()),margin:"none",autoFocus:!0,className:c.fill,value:f,onKeyPress:function(e){return"Enter"===e.key&&v()},onChange:function(e){return b(e.target.value)}}),o.a.createElement(g.a,{onClick:function(){return v()}},o.a.createElement(Xe.a,{fontSize:"small"})),o.a.createElement(g.a,{onClick:function(){return u(!1)}},o.a.createElement($e.a,{fontSize:"small"}))):o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{variant:"subtitle1",className:je()(c.title,c.fill)},t,"s"),o.a.createElement(g.a,{disableRipple:!0,onClick:function(){return u(!0)}},o.a.createElement(le.a,{fontSize:"small"})))),o.a.createElement(Je.a,{dense:!0},0===n.length&&o.a.createElement(We.a,{dense:!0},o.a.createElement(qe.a,{primary:"List is empty."})),n.length>0&&n.map(function(e,t){return o.a.createElement(We.a,{key:t,dense:!0},o.a.createElement(qe.a,{primary:e.text}),o.a.createElement(Ae.a,null,o.a.createElement(g.a,{onClick:function(){return t=e,a&&a(n.filter(function(e){return e!==t}));var t}},o.a.createElement(Ge.a,{fontSize:"small"}))))})))},nt=n(159),at=n.n(nt),rt=n(158),ot=n.n(rt);var ct=Object(a.c)({checkbox:{marginBottom:-12}}),lt=function(e){var t=e.label,n=e.checked,a=e.onChange,r=ct();return o.a.createElement(ot.a,{label:t,className:r.checkbox,control:o.a.createElement(at.a,{checked:n,onChange:a})})};var st=Object(a.c)({content:{display:"flex",flexDirection:"column",width:300},checkboxes:{marginTop:12}}),it=function(e){var t=e.open,n=e.onClose,a=st(),c=Object(r.useContext)(ze),l=c.filterSettings,s=c.updateFilterSettings,i=Object(r.useContext)(V).setLoading,u=Object(r.useState)(l.showCollapsed),p=Object(d.a)(u,2),m=p[0],f=p[1],b=Object(r.useState)(l.showFilteredTerms),h=Object(d.a)(b,2),g=h[0],v=h[1],E=Object(r.useState)(l.showFilteredUsers),x=Object(d.a)(E,2),O=x[0],w=x[1],j=Object(r.useState)(l.filteredTerms),k=Object(d.a)(j,2),C=k[0],T=k[1],F=Object(r.useState)(l.filteredUsers),B=Object(d.a)(F,2),P=B[0],M=B[1],z=function(){var e=Object(N.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i("sync"),e.next=4,s({showCollapsed:m,filteredTerms:C,filteredUsers:P});case 4:n();case 5:return e.prev=5,i(!1),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[0,,5,8]])}));return function(){return e.apply(this,arguments)}}();return o.a.createElement(R.a,{open:t,onClose:n},o.a.createElement(L.a,null,"Filter Settings"),o.a.createElement(D.a,{className:a.content},o.a.createElement(y.a,{variant:"caption",color:"textSecondary"},"These settings adjust what posts display in the chatty. Filtered keywords will hide any posts that match. Filtered users will hide any posts or replies by that user. Terms support full regular expressions. Checking a checkbox will show posts even if they match that criteria."),o.a.createElement(tt,{title:"Term",value:C,onChange:function(e){return T(e)}}),o.a.createElement(tt,{title:"User",value:P,onChange:function(e){return M(e)}}),o.a.createElement("div",{className:a.checkboxes},o.a.createElement(lt,{label:"Show Collapsed Threads",checked:m,onChange:function(){return f(!m)}}),o.a.createElement(lt,{label:"Show Filtered Terms",checked:g,onChange:function(){return v(!g)}}),o.a.createElement(lt,{label:"Show Filtered Users",checked:O,onChange:function(){return w(!O)}}))),o.a.createElement(U.a,null,o.a.createElement(S.a,{onClick:n},"Cancel"),o.a.createElement(S.a,{onClick:z},"Save")))};var ut=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),l=Object(d.a)(c,2),s=l[0],i=l[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ue.a,{disableFocusListener:!0,title:"Filter Settings",enterDelay:350},o.a.createElement(Le.a,{onClick:function(){return a(!0)||i(!0)}},o.a.createElement(De.a,null))),s&&o.a.createElement(it,{open:n,onClose:function(){return a(!1)}}))},dt=n(162),pt=n.n(dt);var mt=Object(a.c)({white:{color:"#fff"},title:{color:"#fff",flex:1},menuButton:{marginLeft:-15,marginRight:8},menuItem:{textDecoration:"none",color:"inherit"}}),ft=function(){var e=mt(),t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],c=n[1],l=function(){return c(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{elevation:0},o.a.createElement(b.a,null,o.a.createElement(g.a,{className:e.menuButton,onClick:function(){return c(!a)}},o.a.createElement(E.a,{className:e.white})),o.a.createElement(y.a,{variant:"h5",className:e.title},"Chatty"),o.a.createElement(ut,null),o.a.createElement(Te,null),o.a.createElement(Re,null),o.a.createElement(oe,null),o.a.createElement(Q,null))),o.a.createElement(pt.a,{open:a,onClose:l,className:e.drawer},o.a.createElement(m.a,{position:"static",color:"primary",className:e.drawerAppBar},o.a.createElement(b.a,null,o.a.createElement(y.a,{variant:"h6",className:e.title},"Latest Chatty"))),o.a.createElement("a",{href:"https://github.com/latestchatty/chatty",target:"_blank",rel:"noopener noreferrer",className:e.menuItem},o.a.createElement(O.a,{onClick:l},"Contribute")),o.a.createElement("a",{href:"https://github.com/latestchatty/chatty/issues",target:"_blank",rel:"noopener noreferrer",className:e.menuItem},o.a.createElement(O.a,{onClick:l},"Feedback"))))},bt=n(168),ht=n.n(bt),gt=n(169),vt=n.n(gt),Et=n(170),xt=n.n(Et),Ot=n(167),wt=n.n(Ot);var yt=Object(a.c)({wrapper:{height:8,width:48,margin:7,background:"rgb(221, 221, 221) -webkit-gradient(\n                linear,\n                0% 0%,\n                0% 100%,\n                from(rgb(170, 170, 170)),\n                color-stop(0.4, rgb(204, 204, 204)),\n                color-stop(0.6, rgb(204, 204, 204)),\n                to(rgb(238, 238, 238))\n            )"},value:{height:8,backgroundImage:"-webkit-gradient(\n                linear,\n                0 100%,\n                100% 0,\n                color-stop(0.25, rgba(255, 255, 255, 0.4)),\n                color-stop(0.25, transparent),\n                color-stop(0.5, transparent),\n                color-stop(0.5, rgba(255, 255, 255, 0.4)),\n                color-stop(0.75, rgba(255, 255, 255, 0.4)),\n                color-stop(0.75, transparent),\n                to(transparent)\n            )",backgroundSize:"25px 25px",boxShadow:"rgba(255, 255, 255, 0.298039) 0 2px 4px inset, rgba(0, 0, 0, 0.4) 0 -2px 3px inset"}}),jt=function(e){var t=e.date,n=yt(),a=(new Date).getTime(),r=new Date(t).getTime(),c=Math.min((a-r)/36e5/18*100,100),l="red";return c<=25?l="springgreen":c<=50?l="yellow":c<=75&&(l="orange"),o.a.createElement("div",{className:n.wrapper},o.a.createElement("div",{className:n.value,style:{width:"".concat(c,"%"),backgroundColor:l}}))},kt=n(163),Ct=n.n(kt),St=n(164),Tt=n.n(St);var It=Object(a.c)({date:{fontSize:10,color:"#888",paddingTop:3,marginRight:3}}),Nt=function(e){var t=e.date,n=It();return o.a.createElement(Z.a,{disableFocusListener:!0,title:Ct()(t,"MMM DD, YYYY h:mma"),enterDelay:350},o.a.createElement("div",{className:n.date},Tt()(t)," ago"))};var Ft=["themanwiththebriefcase","shacknews"],Rt=[],Bt=Object(a.c)({user:{fontSize:14,fontWeight:"bold",cursor:"pointer","&:hover":{textDecoration:"underline"}},normal:{color:"#f3e7b5"},self:{color:"#6cf"},op:{color:"#6aff94"},mod:{color:"#d20000"},employee:{color:"#9370db"}}),Lt=function(e){var t=e.post,n=void 0===t?{}:t,a=e.thread,c=void 0===a?{}:a,l=Bt(),s=Object(r.useContext)(J).username,i=n.author,u=void 0===i?"":i,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.toLowerCase().replace(/\s/g,"")===t.toLowerCase().replace(/\s/g,"")},p=Object(r.useMemo)(function(){return s&&d(u,s)?"self":c.id!==n.id&&d(c.author,u)?"op":Ft.find(function(e){return d(e,u)})?"employee":Rt.find(function(e){return d(e,u)})?"mod":"normal"},[s,u,c.id,n.id,c.author]),m=Object(r.useMemo)(function(){return u.replace(/\s/g,String.fromCharCode(160))},[u]);return o.a.createElement("span",{className:je()(l.user,l[p])},m)},Pt=n(59),Dt=n(165),Mt=n.n(Dt),Ut=["lol","inf","unf","wtf"];var zt=Object(a.c)({containerPost:{marginLeft:12},containerOneline:{marginLeft:4,whiteSpace:"nowrap"},chip:{height:16,marginTop:2,marginRight:6,fontSize:10},nonChip:{marginRight:4,fontSize:9},lolBorder:{border:"1px solid #f80"},infBorder:{border:"1px solid #09c"},unfBorder:{border:"1px solid #f00"},wtfBorder:{border:"1px solid #c000c0"},tagBorder:{border:"1px solid #bbaf57"},lol:{color:"#f80"},inf:{color:"#09c"},unf:{color:"#f00"},wtf:{color:"#c000c0"},tag:{color:"#bbaf57"}}),_t=function(e){var t=e.tags,n=void 0===t?[]:t,a=e.variant,c=zt(),l=Object(r.useMemo)(function(){var e=n.filter(function(e){return Ut.includes(e.tag)}),t=n.filter(function(e){return!Ut.includes(e.tag)}).reduce(function(e,t){return e+t.count},0);return[].concat(Object(Pt.a)(e),[{tag:"tag",count:t}])},[n]);return o.a.createElement("div",{className:"post"===a?c.containerPost:c.containerOneline},l.map(function(e){return e.count<1?null:"post"===a?o.a.createElement(Mt.a,{key:e.tag,className:je()(c.chip,c[e.tag],c["".concat(e.tag,"Border")]),label:"".concat(e.count," ").concat(e.tag),variant:"outlined"}):"oneline"===a?o.a.createElement("span",{key:e.tag,className:je()(c.nonChip,c[e.tag])},"".concat(e.count," ").concat(e.tag)):null}))},Jt=n(166),Vt=n.n(Jt);var Wt=function(e){var t=e.className,n=e.postId,a=Object(r.useContext)(J),c=a.isLoggedIn,l=a.username,s=Object(r.useContext)(V),i=s.setLoading,u=s.showSnackbar,p=Object(r.useState)(null),m=Object(d.a)(p,2),f=m[0],b=m[1],h=Ut.map(function(e){return e.toUpperCase()}),g=function(){var e=Object(N.a)(I.a.mark(function e(t){var a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i("async"),b(null),e.next=5,v(l,n,t);case 5:if(!(a=e.sent).includes("already tagged")){e.next=10;break}return e.next=9,v(l,n,t,"untag");case 9:a=e.sent;case 10:a.match(/^ok /)||console.warn("Error tagging post",a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Exception while tagging post",e.t0),u("Error while tagging post. Please try again later.");case 17:return e.prev=17,i(!1),e.finish(17);case 20:case"end":return e.stop()}},e,null,[[0,13,17,20]])}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(N.a)(I.a.mark(function e(t,n,a,r){var o,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={who:t,what:n,tag:a,version:-1},r&&(o.action=r),e.next=5,fetch("".concat("https://lol.lmnopc.com/report.php","?").concat(xe.a.stringify(o)),{method:"POST"});case 5:return c=e.sent,e.abrupt("return",c.text());case 7:case"end":return e.stop()}},e)}));return function(t,n,a,r){return e.apply(this,arguments)}}();return c?o.a.createElement(o.a.Fragment,null,o.a.createElement(Z.a,{disableFocusListener:!0,title:"Tag Post",enterDelay:350},o.a.createElement(Vt.a,{className:t,onClick:function(e){return b(e.target)}})),f&&o.a.createElement(k.a,{keepMounted:!0,open:!!f,anchorEl:f,onClose:function(){return b(null)}},h.map(function(e){return o.a.createElement(O.a,{key:e,onClick:function(){return g(e)}},e)}))):null};var Ht=function(e){var t=e.post,n=Object(r.useMemo)(function(){var e=t.body;return"Shacknews"===t.author&&(e=t.body.replace('href="/','href="https://www.shacknews.com/')),{__html:e}},[t.body,t.author]);return o.a.createElement("span",{dangerouslySetInnerHTML:n})};var At=Object(a.c)({card:{backgroundColor:"#202224",borderRadius:0,marginBottom:3},replyBorder:{border:"1px solid #656565"},replyBox:{marginTop:-3},tagNws:{borderLeft:"3px solid red !important"},tagInformative:{borderLeft:"3px solid #00bff3 !important"},tagFrontpage:{borderLeft:"3px solid mediumpurple !important"},content:{maxWidth:"calc(100vw - 32)",color:"lightgray",fontSize:13,padding:"8px 16px"},header:{backgroundColor:"#373a3c",padding:"3px 3px 3px 16px",display:"flex",flexDirection:"row"},actions:{height:34},flex:{flex:1},toolbarButton:{width:18,height:18,cursor:"pointer",color:"#fff",marginRight:6},collapsed:{color:"#f00 !important"},pinned:{color:"#fcbf20 !important"}}),Yt=function(e){var t=e.post,n=e.thread,a=e.onCollapse,c=e.onPinned,l=e.replyBoxOpenForId,s=e.onOpenReplyBox,i=e.onCloseReplyBox,u=At(),d=Object(r.useRef)(null),p=Object(r.useContext)(J).isLoggedIn,m=Object(r.useContext)(ze).isPostVisible,f=Object(r.useMemo)(function(){return"nuked"===t.category?null:"nws"===t.category?"tagNws":"informative"===t.category?"tagInformative":/shacknews/i.test(t.author)?"tagFrontpage":null},[t.category,t.author]),b=t.parentId>0,h=b?"replyBorder":null;return Object(r.useEffect)(function(){if(b){var e=d.current.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight),n=e.bottom<0,a=e.top-t>=0;n?window.scrollTo({left:0,top:d.current.offsetTop-75,behavior:"smooth"}):a&&window.scrollTo({left:0,top:d.current.offsetTop-t+e.height+24,behavior:"smooth"})}},[b]),Object(r.useMemo)(function(){return m(n,t)},[m,t,n])?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{ref:d},o.a.createElement(ie.a,{className:je()(u.card,u[f],u[h])},o.a.createElement("div",{className:u.header},o.a.createElement(Lt,{post:t,thread:n}),o.a.createElement(_t,{tags:t.lols,variant:"post"}),o.a.createElement("span",{className:u.flex}),o.a.createElement(Nt,{date:t.date}),0===t.parentId&&o.a.createElement(jt,{date:t.date})),o.a.createElement(be.a,{className:je()("postbody",u.content)},o.a.createElement(Ht,{post:t})),o.a.createElement(me.a,{className:u.actions,disableActionSpacing:!0},o.a.createElement(Z.a,{disableFocusListener:!0,title:"collapsed"===t.markType?"Uncollapse":"Collapse",enterDelay:350},o.a.createElement($e.a,{className:je()(u.toolbarButton,"collapsed"===t.markType?u.collapsed:null),onClick:a})),p&&o.a.createElement(Z.a,{disableFocusListener:!0,title:"Reply",enterDelay:350},o.a.createElement(wt.a,{className:u.toolbarButton,onClick:function(){return s(t.id)}})),p&&0===t.parentId&&o.a.createElement(o.a.Fragment,null,"pinned"===t.markType&&o.a.createElement(Z.a,{disableFocusListener:!0,title:"Unpin Thread",enterDelay:350},o.a.createElement(ht.a,{className:je()(u.toolbarButton,u.pinned),onClick:c})),"pinned"!==t.markType&&o.a.createElement(Z.a,{disableFocusListener:!0,title:"Pin Thread",enterDelay:350},o.a.createElement(vt.a,{className:u.toolbarButton,onClick:c}))),o.a.createElement(Wt,{postId:t.id,className:u.toolbarButton}),o.a.createElement(Z.a,{disableFocusListener:!0,title:"View Post @ Shacknews.com",enterDelay:350},o.a.createElement("a",{className:u.toolbarButton,target:"_blank",rel:"noopener noreferrer",href:"http://www.shacknews.com/chatty?id=".concat(t.id,"#item_").concat(t.id)},o.a.createElement(xt.a,{className:u.toolbarButton})))))),l===t.id&&o.a.createElement(Ce,{parentId:t.id,onCloseReplyBox:i,className:u.replyBox})):null},qt=function(e){return e.replace(/(<[^>]+>)/gm,"")},Kt=function(e){for(var t=function(e){return e.replace(/(<(?!span)(?!\/span)[^>]+>| tabindex="1")/gm," ")}(e),n=0,a=0,r=!1,o=!1;n<t.length&&a<106;)"<"===t[n]?r=!0:">"===t[n]?r=!1:"&"===t[n]?o=!0:""===t[n]&&o?(o=!1,a++):r||a++,n++;var c=t.slice(0,n).trim();return(n<t.length||!c)&&(c+="..."),c};var Gt=Object(a.c)({container:{display:"flex",flexDirection:"row"},separator:{padding:"0 3px",fontSize:11,color:"#fff"},oneline:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{color:"#fff",backgroundColor:"#233548",cursor:"pointer"}},oneline10:{color:"#777"},oneline9:{color:"#888"},oneline8:{color:"#999"},oneline7:{color:"#aaa"},oneline6:{color:"#bbb"},oneline5:{color:"#ccc"},oneline4:{color:"#ddd"},oneline3:{color:"#eee"},oneline2:{color:"#fff"},oneline1:{color:"#eee",fontWeight:"bold"}}),Qt=function(e){var t=e.post,n=e.thread,a=e.onExpandReply,c=Gt(),l="oneline".concat(t.recentReplyNumber||9),s=Object(r.useMemo)(function(){return Kt(t.body)},[t.body]);return o.a.createElement("div",{className:c.container},o.a.createElement("span",{className:je()(c.oneline,c[l]),dangerouslySetInnerHTML:{__html:s},onClick:function(){return a(t.id)}}),o.a.createElement(_t,{tags:t.lols,variant:"oneline"}),o.a.createElement(Lt,{post:t,thread:n}))};var Xt=function e(t){var n=t.className,a=t.thread,c=void 0===a?{}:a,l=t.parent,s=void 0===l?c:l,i=t.onCollapseReply,u=t.onExpandReply,d=t.onOpenReplyBox,p=t.expandedReplyId,m=t.replyBoxOpenForId,f=t.onCloseReplyBox,b=Object(r.useContext)(ze).isPostVisible;return o.a.createElement("ul",{className:je()("comments",n)},c.posts.filter(function(e){return e.parentId===s.id}).filter(function(e){return b(c,e)}).map(function(t){return o.a.createElement("li",{key:t.id},p===t.id?o.a.createElement(Yt,{post:t,thread:c,onCollapse:i,replyBoxOpenForId:m,onOpenReplyBox:d,onCloseReplyBox:f}):o.a.createElement(Qt,{post:t,thread:c,onExpandReply:u}),o.a.createElement(e,{thread:c,parent:t,expandedReplyId:p,replyBoxOpenForId:m,onExpandReply:u,onCollapseReply:i,onOpenReplyBox:d,onCloseReplyBox:f}))}))};var Zt=Object(a.c)({thread:{marginBottom:15},truncatedMessage:{color:"#fff",fontWeight:"bold",borderTop:"1px solid #656565",borderBottom:"1px dotted #fff",backgroundColor:"#181818",cursor:"pointer",marginTop:-3,"&:hover":{backgroundColor:"#282828"}},replyCount:{color:"#00bff3"},truncatedContainer:{height:300,overflow:"hidden",position:"relative"},truncatedComments:{position:"absolute !important",bottom:0}}),$t=o.a.memo(function(e){var t=e.thread,n=Zt(),a=Object(r.useState)(null),c=Object(d.a)(a,2),l=c[0],s=c[1],i=Object(r.useState)(null),u=Object(d.a)(i,2),p=u[0],m=u[1],f=Object(r.useState)(t.posts.length>20),b=Object(d.a)(f,2),h=b[0],g=b[1],v=Object(r.useState)(t.markType),E=Object(d.a)(v,2),x=E[0],O=E[1],w=Object(r.useContext)(J),y=w.username,j=w.isLoggedIn,k=Object(r.useContext)(ze).isPostVisible,C=Object(r.useMemo)(function(){var e=t.posts?t.posts.sort(function(e,t){return e.id-t.id}):[];e.slice(-10).reverse().forEach(function(e,t){return e.recentReplyNumber=t+1});var n=Object(d.a)(e,1)[0];return Object(ve.a)({},t,n,{id:+t.threadId,posts:e,markType:x})},[t,x]),S=function(){var e=Object(N.a)(I.a.mark(function e(t,n){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(O(n),!j){e.next=10;break}return e.prev=2,e.next=5,Oe("clientData/markPost",{method:"POST",body:{username:y,postId:t,type:n}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Error marking post.",e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t,n){return e.apply(this,arguments)}}(),T=function(e){return m(e)},F=function(){return m(null)};return Object(r.useMemo)(function(){return k(C)},[k,C])?o.a.createElement("div",{className:n.thread},o.a.createElement(Yt,{post:C,thread:C,replyBoxOpenForId:p,onCollapse:function(){return S(C.threadId,"unmarked"===C.markType?"collapsed":"unmarked")},onOpenReplyBox:T,onCloseReplyBox:F,onPinned:function(){return S(C.threadId,"unmarked"===C.markType?"pinned":"unmarked")}}),h&&o.a.createElement("div",{className:n.truncatedMessage,onClick:function(){return g(!1)}},"Thread truncated. Click to see all\xa0",o.a.createElement("span",{className:n.replyCount},C.posts.length-1),"\xa0replies."),o.a.createElement("div",{className:h?n.truncatedContainer:null},o.a.createElement(Xt,{className:h?n.truncatedComments:null,thread:C,expandedReplyId:l,replyBoxOpenForId:p,onExpandReply:function(e){s(e),m(null),g(!1)},onCollapseReply:function(){s(null),m(null)},onOpenReplyBox:T,onCloseReplyBox:F}))):null});var en=Object(a.c)({chatty:{margin:"72px 8px 8px 8px",font:"12px/1.5 arial, helvetica, clean, sans-serif"}}),tn=function(){var e=en(),t=Object(r.useContext)(ae).threads;return o.a.createElement("div",{className:e.chatty},t.map(function(e){return o.a.createElement($t,{key:e.threadId,thread:e})}))};var nn=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ft,null),o.a.createElement(u.c,null,o.a.createElement(u.a,{path:"/chatty",component:tn}),o.a.createElement(u.a,{component:tn})))};var an=function(e){var t=e.children,n=Object(r.useContext)(V),a=n.setLoading,c=n.showSnackbar,l=Object(r.useState)(function(){try{var e=localStorage.getItem("auth")||"{}",t=JSON.parse(e)||{};return{username:t.username,password:t.password}}catch(n){return console.log("Invalid storage value: auth",n),localStorage.removeItem("auth"),{username:null,password:null}}}),s=Object(d.a)(l,2),i=s[0],u=s[1],p=Object(r.useCallback)(function(){var e=Object(N.a)(I.a.mark(function e(t,n){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a("async"),e.next=4,Oe("verifyCredentials",{method:"POST",body:{username:t,password:n}});case 4:e.sent.isValid?(localStorage.setItem("auth",JSON.stringify({username:t,password:n})),u({username:t,password:n})):(console.log("Invalid login credentials."),c("Invalid username/password. Please check them and try again")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error while logging in",e.t0),c("Error while logging in. Please try again later.");case 12:return e.prev=12,a(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,8,12,15]])}));return function(t,n){return e.apply(this,arguments)}}(),[a,c]),m=Object(r.useCallback)(function(){localStorage.removeItem("auth"),u({username:null,password:null})},[]),f=i.username&&i.password,b=Object(r.useMemo)(function(){return Object(ve.a)({},i,{isLoggedIn:f,login:p,logout:m})},[i,f,p,m]);return o.a.createElement(J.Provider,{value:b},t)},rn=n(58),on=n(172),cn=n.n(on),ln=n(173),sn=n.n(ln);var un=function(e){var t=e.children,n=Object(r.useContext)(J),a=n.isLoggedIn,c=n.username,l=Object(r.useContext)(V),s=l.setLoading,i=l.showSnackbar,u=Object(r.useState)({threads:[],newThreads:[]}),p=Object(d.a)(u,2),m=p[0],f=p[1],b=Object(r.useState)(0),h=Object(d.a)(b,2),g=h[0],v=h[1],E=Object(r.useCallback)(Object(N.a)(I.a.mark(function e(){var t,n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,Oe("clientData/getMarkedPosts?username=".concat(encodeURIComponent(c)));case 3:return t=e.sent,n=t.markedPosts,e.abrupt("return",n);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}},e)})),[a,c]),x=Object(r.useCallback)(Object(N.a)(I.a.mark(function e(){var t,n,a,r,o,l,s,i,u,d,p,b=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.length>0&&void 0!==b[0]&&b[0],n=b.length>1&&void 0!==b[1]&&b[1],a=b.length>2&&void 0!==b[2]&&b[2],!t){e.next=9;break}return e.next=6,O();case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0={};case 10:if(r=e.t0,o=r.threads,!n){e.next=16;break}return e.next=15,E(n);case 15:l=e.sent;case 16:if(o=o||m.threads,o=a?m.newThreads.concat(o):o,s=a?[]:m.newThreads,l&&(i=l.reduce(function(e,t){return Object(ve.a)({},e,Object(rn.a)({},t.id,t.type))},{}),o=o.map(function(e){return Object(ve.a)({},e,{markType:i[e.threadId]||"unmarked"})})),u=o.reduce(function(e,t){return e[t.threadId]=t.posts.reduce(function(e,t){return Math.max(t.id,e)},0),e},{}),d=cn()(Date.now(),18),o=(o=o.filter(function(e){var t=+e.threadId,n=e.posts.find(function(e){return e.id===t});return sn()(d,n.date)})).sort(function(e,t){return u[t.threadId]-u[e.threadId]}).sort(function(e,t){return"pinned"===e.markType?-1:"pinned"===t.markType?1:0}),f({threads:o,newThreads:s}),!l){e.next=36;break}if(!(p=l.filter(function(e){return!u[e.id]}).map(function(e){return e.id})).length){e.next=36;break}return e.prev=28,e.next=31,Oe("clientData/markPost",{method:"POST",body:{username:c,postId:p.join(","),type:"unmarked"}});case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(28),console.error("Error unmarking old posts.",e.t1);case 36:case"end":return e.stop()}},e,null,[[28,33]])})),[m.newThreads,m.threads,E,c]),O=function(){var e=Object(N.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe("getChatty".concat(t>0?"?count=".concat(t):""));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.eventType,a=e.eventData;if("newPost"===n){var r=a.post;if(r.parentId){var o="".concat(r.threadId),c=function(e){return e.threadId===o?Object(ve.a)({},e,{posts:[].concat(Object(Pt.a)(e.posts),[r])}):e};return{threads:t.threads.map(c),newThreads:t.newThreads.map(c)}}return{threads:t.threads,newThreads:[].concat(Object(Pt.a)(t.newThreads),[{threadId:"".concat(r.id),posts:[r]}])}}if("categoryChange"===n){var l=a.postId,s=a.category,i=function(e){if(e.posts.find(function(e){return e.id===l})){var t=e.posts.map(function(e){return e.id===l?Object(ve.a)({},e,{category:s}):e});return Object(ve.a)({},e,{posts:t})}return e};return{threads:t.threads.map(i),newThreads:t.newThreads.map(i)}}if("lolCountsUpdate"===n){var u=a.updates.reduce(function(e,t){var n=t.postId,a=t.tag,r=t.count;return Object(ve.a)({},e,Object(rn.a)({},n,{tag:a,count:r}))},{}),d=function(e){if(e.posts.find(function(e){return u[e.id]})){var t=e.posts.map(function(e){var t=u[e.id];if(t){var n=(e.lols||[]).filter(function(e){return e.tag!==t.tag}).concat([t]);return Object(ve.a)({},e,{lols:n})}return e});return Object(ve.a)({},e,{posts:t})}return e};return{threads:t.threads.map(d),newThreads:t.newThreads.map(d)}}console.debug("Unhandled event type:",e)},y=Object(r.useCallback)(Object(N.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(!1,!1,!0);case 2:window.scrollTo(0,0);case 3:case"end":return e.stop()}},e)})),[x]);Object(r.useEffect)(function(){var e=function(){var t=Object(N.a)(I.a.mark(function t(){var n,a;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s("async"),t.next=4,Oe("getNewestEventId");case 4:return n=t.sent,a=n.eventId,t.next=8,x(!0,!0,!1);case 8:v(a),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),i("Error loading chatty. Content may not be current."),console.error("Exception while doing full reload.",t.t0),setTimeout(function(){return e()},3e4);case 16:return t.prev=16,s(!1),t.finish(16);case 19:case"end":return t.stop()}},t,null,[[0,11,16,19]])}));return function(){return t.apply(this,arguments)}}();0===g&&e()},[g]),Object(r.useEffect)(function(){var e=!0;return g&&function(){var t=Object(N.a)(I.a.mark(function t(){var n,a,r,o,c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!g){t.next=16;break}return t.prev=1,t.next=4,Oe("waitForEvent?lastEventId=".concat(g));case 4:n=t.sent,a=n.lastEventId,r=n.events,o=n.error,e&&(o?(console.error("Error from API:waitForLastEvent call.",o),i("Error receiving events. Reloading full chatty."),v(0)):(c=r.reduce(function(e,t){return w(t,e)},m),f(c),v(a))),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(1),i("Error receiving events. Reloading full chatty."),console.error("Exception from API:waitForLastEvent call.",t.t0),v(0);case 16:case"end":return t.stop()}},t,null,[[1,11]])}));return function(){return t.apply(this,arguments)}}()(g),function(){return e=!1}},[g]);var j=Object(r.useMemo)(function(){return Object(ve.a)({},m,{refreshChatty:y})},[m,y]);return o.a.createElement(ae.Provider,{value:j},t)},dn=(n(390),n(391),n(392),n(174)),pn=n.n(dn);var mn=Object(a.c)({progress:{zIndex:9999,position:"fixed",top:0,width:"100vw"}}),fn=function(e){var t=e.loading,n=mn();return"async"!==t?null:o.a.createElement(pn.a,{className:n.progress,color:"secondary"})},bn=n(175),hn=n.n(bn);var gn=Object(a.c)({container:{zIndex:99999,position:"fixed",top:0,left:0,bottom:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.2)"},progress:{position:"absolute",top:"calc(50% - 60px)",left:"calc(50% - 60px)"}}),vn=function(e){var t=e.loading,n=gn();return"sync"!==t?null:o.a.createElement("div",{className:n.container},o.a.createElement(hn.a,{className:n.progress,size:60,thickness:4,color:"secondary"}))},En=n(176),xn=n.n(En);var On=function(e){var t=e.snackbars,n=e.setSnackbars,a=function(){return n(t.slice(1))},r=!1,c="";return t.length&&(r=!0,c=t[0]),o.a.createElement(xn.a,{anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,open:r,onClose:a,onExited:a,message:o.a.createElement("span",null,c)})};var wn=function(e){var t=e.children,n=Object(r.useState)(!1),a=Object(d.a)(n,2),c=a[0],l=a[1],s=Object(r.useState)([]),i=Object(d.a)(s,2),u=i[0],p=i[1],m=Object(r.useCallback)(function(e){return p(u.concat([e]))},[u]),f=Object(r.useMemo)(function(){return{setLoading:l,showSnackbar:m}},[m]);return o.a.createElement(V.Provider,{value:f},o.a.createElement(vn,{loading:c}),o.a.createElement(fn,{loading:c}),o.a.createElement(On,{snackbars:u,setSnackbars:p}),t)},yn=o.a.createContext({});var jn={filteredTerms:[],filteredUsers:[],showCollapsed:!1,showFilteredTerms:!1,showFilteredUsers:!1},kn=function(e){var t=e.children,n=Object(r.useContext)(yn),a=n.clientData,c=n.updateClientData,l=Object(r.useState)(jn),s=Object(d.a)(l,2),i=s[0],u=s[1],p=Object(r.useContext)(V).showSnackbar,m=Object(r.useCallback)(function(){var e=Object(N.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("filterSettings",t);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error updating clientData.filterSettings."),p("Error updating filter settings, changes may have been lost.");case 9:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),[p,c]);Object(r.useEffect)(function(){try{if(a&&a.filterSettings){var e=a.filterSettings;u({filteredTerms:(e.filteredTerms||[]).map(function(e){return{text:e,regex:new RegExp(e,"gmi")}}),filteredUsers:(e.filteredUsers||[]).map(function(e){return{text:e,regex:new RegExp(e,"gmi")}}),showCollapsed:!!e.showCollapsed,showFilteredTerms:!!e.showFilteredTerms,showFilteredUsers:!!e.showFilteredUsers})}}catch(t){console.error("Error parsing clientData.filterSettings, resetting to default."),p("Error loading filter settings, resetting to default."),m(jn),u(jn)}},[a,p,m]);var f=Object(r.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=i.showCollapsed,a=i.showFilteredUsers,r=i.filteredUsers,o=i.showFilteredTerms,c=i.filteredTerms;return!(!n&&"collapsed"===e.markType)&&!(!a&&r.some(function(e){return e.regex.test(t.author)}))&&!(!o&&c.some(function(e){return e.regex.test(qt(t.body))}))},[i]),b=Object(r.useCallback)(function(){var e=Object(N.a)(I.a.mark(function e(t){var n,a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(ve.a)({},i,t),a=Object(ve.a)({},n,{filteredTerms:n.filteredTerms.map(function(e){return e.text}),filteredUsers:n.filteredUsers.map(function(e){return e.text})}),m(a),u(n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[i,m]),h=Object(r.useMemo)(function(){return{filterSettings:i,updateFilterSettings:b,isPostVisible:f}},[i,f,b]);return o.a.createElement(ze.Provider,{value:h},t)},Cn=n(177),Sn=n.n(Cn)()({});var Tn="nixxedchatty",In=function(e){var t=e.children,n=Object(r.useState)({}),a=Object(d.a)(n,2),c=a[0],l=a[1],s=Object(r.useContext)(J),i=s.isLoggedIn,u=s.username,p=Object(r.useContext)(V).showSnackbar,m=Object(r.useCallback)(function(){var e=Object(N.a)(I.a.mark(function e(t,n){var a,r,o,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(ve.a)({},c),t&&(a[t]=n),r=JSON.stringify(a),o={client:Tn,username:encodeURIComponent(u),data:r},e.next=7,Oe("clientData/setClientData",{method:"POST",body:o});case 7:(l=e.sent).error&&(p("Error updating user preferences."),console.log("Error setting client data",l)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),p("Error updating user preferences."),console.error("Error setting client data",e.t0);case 15:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}(),[c,p,u]);Object(r.useEffect)(function(){!function(){var e=Object(N.a)(I.a.mark(function e(){var t,n,a,r,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=19;break}return e.prev=1,t=xe.a.stringify({client:Tn,username:encodeURIComponent(u)}),e.next=5,Oe("clientData/getClientData?".concat(t));case 5:n=e.sent,a=n.data,r=void 0===a?"":a,o=JSON.parse(r),l(o),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),p("Error loading user preferences."),console.error("Error loading client data",e.t0),l({});case 17:e.next=20;break;case 19:l({});case 20:case"end":return e.stop()}},e,null,[[1,12]])}));return function(){return e.apply(this,arguments)}}()()},[i,p,u]);var f=Object(r.useMemo)(function(){return{clientData:c,updateClientData:m}},[c,m]);return i&&!c?null:o.a.createElement(yn.Provider,{value:f},t)};var Nn;Nn=function(){return o.a.createElement(u.b,{history:Sn},o.a.createElement(a.a,{theme:i},o.a.createElement(wn,null,o.a.createElement(an,null,o.a.createElement(In,null,o.a.createElement(kn,null,o.a.createElement(un,null,o.a.createElement(nn,null))))))))},l.a.render(o.a.createElement(Nn,null),document.getElementById("root"))}},[[182,1,2]]]);
//# sourceMappingURL=main.d91715c6.chunk.js.map